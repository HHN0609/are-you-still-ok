# Help Me - æ¥å£æ–‡æ¡£

> æ‰“å¡æé†’ç³»ç»Ÿ API æ–‡æ¡£  
> Base URL: `http://shrink.top:8080`

---

## ä¸€ã€é€šç”¨è¯´æ˜

### 1.1 å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£ç»Ÿä¸€è¿”å›ä»¥ä¸‹æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "success",
  "data": { }
}
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| code | Integer | çŠ¶æ€ç ï¼Œ200 è¡¨ç¤ºæˆåŠŸ |
| message | String | æç¤ºä¿¡æ¯ |
| data | Object | è¿”å›æ•°æ®ï¼Œå¤±è´¥æ—¶ä¸º null |

### 1.2 é”™è¯¯ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### 1.3 æšä¸¾å€¼è¯´æ˜

**å‘é€çŠ¶æ€ (SendStatus)**

| å€¼ | è¯´æ˜ |
|----|------|
| `NOT_SENT` | æœªå‘é€ |
| `SENDING` | å‘é€ä¸­ |
| `SUCCESS` | å‘é€æˆåŠŸ |

---

## äºŒã€æ¥å£åˆ—è¡¨

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ›å»ºç”¨æˆ· | POST | `/api/users` | æ³¨å†Œç”¨æˆ·ä¿¡æ¯ |
| æ›´æ–°ç”¨æˆ· | PUT | `/api/users/{userId}` | ä¿®æ”¹ç”¨æˆ·é…ç½® |
| ç”¨æˆ·æ‰“å¡ | POST | `/api/users/{userId}/checkin` | æ‰“å¡ï¼Œé‡ç½®çŠ¶æ€ |
| æŸ¥è¯¢ç”¨æˆ· | GET | `/api/users/{userId}` | æŸ¥è¯¢å½“å‰çŠ¶æ€ |

### 2.1 åˆ›å»ºç”¨æˆ·

ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨æ—¶è°ƒç”¨ï¼Œæ³¨å†Œç”¨æˆ·ä¿¡æ¯ã€‚

**è¯·æ±‚**

```
POST /api/users
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | String | âœ… | ç”¨æˆ·å |
| phone | String | æ¡ä»¶å¿…å¡« | æœ¬äººæ‰‹æœºå·ï¼Œ`remindEnabled=true` æ—¶å¿…å¡« |
| emergencyPhone | String | âœ… | ç´§æ€¥è”ç³»äººæ‰‹æœºå· |
| goldenHours | Integer | âŒ | é»„é‡‘æ—¶é—´ï¼ˆå°æ—¶ï¼‰ï¼Œé»˜è®¤ 24ï¼ŒèŒƒå›´ 1-168 |
| remindEnabled | Boolean | âŒ | æ˜¯å¦æé†’ç”¨æˆ·æœ¬äººï¼Œé»˜è®¤ false |

**è¯·æ±‚ç¤ºä¾‹1ï¼šå¼€å¯æé†’ï¼ˆéœ€è¦æœ¬äººæ‰‹æœºå·ï¼‰**

```json
{
  "username": "å¼ ä¸‰",
  "phone": "13800138000",
  "emergencyPhone": "13900139000",
  "goldenHours": 24,
  "remindEnabled": true
}
```

**è¯·æ±‚ç¤ºä¾‹2ï¼šå…³é—­æé†’ï¼ˆæœ¬äººæ‰‹æœºå·å¯é€‰ï¼‰**

```json
{
  "username": "æå››",
  "emergencyPhone": "13900139001",
  "goldenHours": 12,
  "remindEnabled": false
}
```

**å“åº”ç¤ºä¾‹**

> ğŸ“ **è¯´æ˜**ï¼š
> - åˆ›å»ºç”¨æˆ·æ—¶è‡ªåŠ¨å®Œæˆé¦–æ¬¡æ‰“å¡ï¼Œ`lastCheckinTime` ä¸ºåˆ›å»ºæ—¶é—´
> - å“åº”åŒ…å«å®Œæ•´çš„ç”¨æˆ·å®ä½“ä¿¡æ¯ï¼ˆå«å†…éƒ¨å­—æ®µ `version`ã€`remindRequestId` ç­‰ï¼‰

```json
{
  "code": 200,
  "message": "åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": 1,
    "username": "å¼ ä¸‰",
    "phone": "13800138000",
    "emergencyPhone": "13900139000",
    "goldenHours": 24,
    "remindEnabled": true,
    "lastCheckinTime": "2026-01-13 10:00:00",
    "remindStatus": "NOT_SENT",
    "remindRequestId": null,
    "remindSendTime": null,
    "notifyStatus": "NOT_SENT",
    "notifyRequestId": null,
    "notifySendTime": null,
    "version": 0,
    "createdAt": "2026-01-13 10:00:00",
    "updatedAt": "2026-01-13 10:00:00"
  }
}
```

**é”™è¯¯å“åº”**

```json
{
  "code": 400,
  "message": "å¼€å¯æé†’æ—¶ï¼Œæœ¬äººæ‰‹æœºå·ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

---

### 2.2 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

ä¿®æ”¹ç”¨æˆ·é…ç½®ï¼Œæ”¯æŒéƒ¨åˆ†æ›´æ–°ï¼ˆåªä¼ éœ€è¦ä¿®æ”¹çš„å­—æ®µï¼‰ã€‚

**è¯·æ±‚**

```
PUT /api/users/{userId}
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| userId | Long | âœ… | ç”¨æˆ· ID |

**è¯·æ±‚å‚æ•°**ï¼ˆæ‰€æœ‰å­—æ®µå¯é€‰ï¼Œåªæ›´æ–°ä¼ å…¥çš„å­—æ®µï¼‰

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | String | âŒ | ç”¨æˆ·å |
| phone | String | âŒ | æœ¬äººæ‰‹æœºå· |
| emergencyPhone | String | âŒ | ç´§æ€¥è”ç³»äººæ‰‹æœºå· |
| goldenHours | Integer | âŒ | é»„é‡‘æ—¶é—´ï¼ˆå°æ—¶ï¼‰ï¼ŒèŒƒå›´ 1-168 |
| remindEnabled | Boolean | âŒ | æ˜¯å¦æé†’ç”¨æˆ·æœ¬äºº |

> âš ï¸ **æ³¨æ„**ï¼šå°† `remindEnabled` æ”¹ä¸º `true` æ—¶ï¼Œéœ€ç¡®ä¿ `phone` å·²å¡«å†™ï¼Œå¦åˆ™éœ€åŒæ—¶ä¼ å…¥ `phone`

**è¯·æ±‚ç¤ºä¾‹1ï¼šä¿®æ”¹é»„é‡‘æ—¶é—´**

```json
{
  "goldenHours": 12
}
```

**è¯·æ±‚ç¤ºä¾‹2ï¼šå¼€å¯æé†’å¹¶è®¾ç½®æ‰‹æœºå·**

```json
{
  "remindEnabled": true,
  "phone": "13800138000"
}
```

**è¯·æ±‚ç¤ºä¾‹3ï¼šå…³é—­æé†’**

```json
{
  "remindEnabled": false
}
```

**å“åº”ç¤ºä¾‹**

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "id": 1,
    "username": "å¼ ä¸‰",
    "phone": "13800138000",
    "emergencyPhone": "13900139000",
    "goldenHours": 12,
    "remindEnabled": true,
    "lastCheckinTime": "2026-01-13 10:30:00",
    "remindStatus": "NOT_SENT",
    "notifyStatus": "NOT_SENT"
  }
}
```

**é”™è¯¯å“åº”**

```json
{
  "code": 400,
  "message": "å¼€å¯æé†’æ—¶ï¼Œæœ¬äººæ‰‹æœºå·ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

---

### 2.3 ç”¨æˆ·æ‰“å¡

ç”¨æˆ·æ‰“å¡ï¼Œé‡ç½®æ‰€æœ‰æé†’çŠ¶æ€ï¼ˆ`remindStatus` å’Œ `notifyStatus` å‡å˜ä¸º `NOT_SENT`ï¼‰ã€‚

**è¯·æ±‚**

```
POST /api/users/{userId}/checkin
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| userId | Long | âœ… | ç”¨æˆ· ID |

**è¯·æ±‚ç¤ºä¾‹**

```
POST /api/users/1/checkin
```

**å“åº”ç¤ºä¾‹**

```json
{
  "code": 200,
  "message": "æ‰“å¡æˆåŠŸ",
  "data": {
    "userId": 1,
    "checkinTime": "2026-01-13 10:30:00"
  }
}
```

**é”™è¯¯å“åº”**

```json
{
  "code": 500,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```

---

### 2.4 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯

æŸ¥è¯¢ç”¨æˆ·å½“å‰çŠ¶æ€ã€‚

**è¯·æ±‚**

```
GET /api/users/{userId}
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| userId | Long | âœ… | ç”¨æˆ· ID |

**è¯·æ±‚ç¤ºä¾‹**

```
GET /api/users/1
```

**å“åº”å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Long | ç”¨æˆ· ID |
| username | String | ç”¨æˆ·å |
| phone | String | æœ¬äººæ‰‹æœºå·ï¼Œå¯èƒ½ä¸ºç©º |
| emergencyPhone | String | ç´§æ€¥è”ç³»äººæ‰‹æœºå· |
| goldenHours | Integer | é»„é‡‘æ—¶é—´ï¼ˆå°æ—¶ï¼‰ |
| remindEnabled | Boolean | æ˜¯å¦æé†’ç”¨æˆ·æœ¬äºº |
| lastCheckinTime | String | æœ€è¿‘æ‰“å¡æ—¶é—´ï¼Œæ ¼å¼ï¼š`yyyy-MM-dd HH:mm:ss` |
| remindStatus | String | æœ¬äººæé†’çŠ¶æ€ï¼ˆNOT_SENT/SENDING/SUCCESSï¼‰ |
| notifyStatus | String | ç´§æ€¥è”ç³»äººé€šçŸ¥çŠ¶æ€ï¼ˆNOT_SENT/SENDING/SUCCESSï¼‰ |

**å“åº”ç¤ºä¾‹**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "username": "å¼ ä¸‰",
    "phone": "13800138000",
    "emergencyPhone": "13900139000",
    "goldenHours": 24,
    "remindEnabled": true,
    "lastCheckinTime": "2026-01-13 10:30:00",
    "remindStatus": "NOT_SENT",
    "notifyStatus": "NOT_SENT"
  }
}
```

**é”™è¯¯å“åº”**

```json
{
  "code": 404,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```

---

## ä¸‰ã€ä¸šåŠ¡æµç¨‹è¯´æ˜

### 3.1 æ‰“å¡æé†’æµç¨‹

```
ç”¨æˆ·æ‰“å¡
    â”‚
    â–¼
æ‰€æœ‰çŠ¶æ€é‡ç½®ä¸º NOT_SENT
    â”‚
    â”‚  æ—¶é—´æµé€...
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¶…è¿‡é»„é‡‘æ—¶é—´çš„ 80%ï¼ˆå¦‚ 24h Ã— 0.8 = 19.2hï¼‰ â”‚
â”‚  ä¸” remindEnabled = true                    â”‚
â”‚  ç³»ç»Ÿå‘é€çŸ­ä¿¡æé†’ç”¨æˆ·æœ¬äºº                     â”‚
â”‚  remindStatus: NOT_SENT â†’ SENDING â†’ SUCCESS â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚  ç»§ç»­æ—¶é—´æµé€...
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¶…è¿‡é»„é‡‘æ—¶é—´çš„ 100%ï¼ˆå¦‚ 24hï¼‰               â”‚
â”‚  ç³»ç»Ÿå‘é€çŸ­ä¿¡é€šçŸ¥ç´§æ€¥è”ç³»äºº                   â”‚
â”‚  notifyStatus: NOT_SENT â†’ SENDING â†’ SUCCESS â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 çŠ¶æ€æµè½¬

| çŠ¶æ€ | è¯´æ˜ |
|------|------|
| `NOT_SENT` | åˆå§‹çŠ¶æ€ / æ‰“å¡åé‡ç½® / å‘é€å¤±è´¥å›é€€ |
| `SENDING` | çŸ­ä¿¡å·²æäº¤ï¼Œç­‰å¾…é€è¾¾ç¡®è®¤ |
| `SUCCESS` | çŸ­ä¿¡å·²æˆåŠŸé€è¾¾ |

### 3.3 remindEnabled å¼€å…³è¯´æ˜

| remindEnabled | æ•ˆæœ |
|---------------|------|
| `true` | è¶…æ—¶åæé†’ç”¨æˆ·æœ¬äººï¼Œ**éœ€è¦å¡«å†™æœ¬äººæ‰‹æœºå·** |
| `false` | ä¸æé†’ç”¨æˆ·æœ¬äººï¼Œæœ¬äººæ‰‹æœºå·å¯é€‰ |

> ğŸ“Œ **æ³¨æ„**ï¼šæ— è®º `remindEnabled` è®¾ç½®å¦‚ä½•ï¼Œè¶…æ—¶å**éƒ½ä¼šé€šçŸ¥ç´§æ€¥è”ç³»äºº**ã€‚

---

## å››ã€ä½¿ç”¨ç¤ºä¾‹

### 4.1 å®Œæ•´æµç¨‹ç¤ºä¾‹

**1. åˆ›å»ºç”¨æˆ·ï¼ˆå¼€å¯æé†’ï¼‰**

```bash
curl -X POST http://shrink.top:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "å¼ ä¸‰",
    "phone": "13800138000",
    "emergencyPhone": "13900139000",
    "goldenHours": 24,
    "remindEnabled": true
  }'
```

**2. åˆ›å»ºç”¨æˆ·ï¼ˆå…³é—­æé†’ï¼Œä¸éœ€è¦æœ¬äººæ‰‹æœºå·ï¼‰**

```bash
curl -X POST http://shrink.top:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "æå››",
    "emergencyPhone": "13900139001",
    "goldenHours": 12,
    "remindEnabled": false
  }'
```

**3. ç”¨æˆ·æ‰“å¡**

```bash
curl -X POST http://shrink.top:8080/api/users/1/checkin
```

**4. æŸ¥è¯¢çŠ¶æ€**

```bash
curl http://shrink.top:8080/api/users/1
```

**5. ä¿®æ”¹é…ç½®**

```bash
curl -X PUT http://shrink.top:8080/api/users/1 \
  -H "Content-Type: application/json" \
  -d '{"goldenHours": 12}'
```

---

## äº”ã€æ³¨æ„äº‹é¡¹

1. **æ‰‹æœºå·æ ¼å¼**ï¼šå¿…é¡»æ˜¯ 11 ä½å¤§é™†æ‰‹æœºå·ï¼Œä»¥ 1 å¼€å¤´
2. **é»„é‡‘æ—¶é—´èŒƒå›´**ï¼š1-168 å°æ—¶ï¼ˆ1å°æ—¶ ~ 7å¤©ï¼‰
3. **æ‰“å¡æ—¶æ•ˆ**ï¼šæ¯æ¬¡æ‰“å¡ä¼šé‡ç½®æ‰€æœ‰æé†’çŠ¶æ€
4. **æœ¬äººæ‰‹æœºå·**ï¼š`remindEnabled=true` æ—¶å¿…å¡«ï¼Œ`remindEnabled=false` æ—¶å¯é€‰
5. **ç´§æ€¥è”ç³»äººé€šçŸ¥**ï¼šæ— è®ºé…ç½®å¦‚ä½•ï¼Œè¶…æ—¶åä¸€å®šä¼šé€šçŸ¥ç´§æ€¥è”ç³»äºº
6. **æ—¶é—´æ ¼å¼**ï¼šæ‰€æœ‰æ—¶é—´å­—æ®µä½¿ç”¨ `yyyy-MM-dd HH:mm:ss` æ ¼å¼
